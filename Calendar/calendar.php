<!DOCTYPE html>
<html>
<head>
    <title>CSE330 Module 5 Calendar</title>
    <link href="calendardesign.css" rel="stylesheet" type="text/css">
</head>
<body>
	<h1>
        Tommy and Rob Calendar
    </h1>
    <h2 id = "monthtitle">
        MONTH
    </h2>
    <table>
        <tr>
            <th class = "col">
                SUNDAY
            </th>
            <th class = "col">
                MONDAY
            </th>
            <th class = "col">
                TUESDAY
            </th>
            <th class = "col">
                WEDNESDAY
            </th>
            <th class = "col">
                THURSDAY
            </th>
            <th class = "col">
                FRIDAY
            </th>
            <th class = "col">
                SATURDAY
            </th>
        </tr>
        <tr>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
        </tr>
        <tr id = "sixth">
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
            <td class = "day">
                <div class = "date">
                    <div class = "number">
                        1
                    </div>
                    <div class = "events">
                        <ul class="elist"></ol>
                    </div>
                </div>
            </td>
        </tr>
    </table>
    <br>
    <div class = "bottom">
        <div class ="buttons">
            <button class = "open-button" value = "Previous Month" id = "prev_month_btn">Previous Month </button>
        </div>
        <div class ="buttons" id = "add_btn">
            <button class="open-button1"  onclick="openEvent()">Add Event</button>
        </div>
        <div class ="buttons" id = "man_btn">
            <button class="open-button1"  onclick="openEvent1()">Event Management</button>
        </div>
        <div class ="buttons">
            <button class = "open-button" value = "Next Month" id = "next_month_btn">Next Month</button>
        </div>
        <div class ="buttons">
            <form action="callogout.php" class ="open-button"  method="POST">
                <input type="submit" class = "open-button" value="Logout">
            </form>
            <!-- <button class = "open-button" value="Logout" onclick="calLogout()">Logout</button> -->
        </div>
    </div>

    <div class = "eventform" id = "addEvent">
            <h1>Add Event</h1>
        <form  class="form-container">        
            <label for="eventname"><b>Event Name</b></label>
            <input type="text" placeholder="Enter Event Name" name="eventname" id="ename" required><br><br>

            <label for="year"><b>Year</b></label>
            <input type="number" placeholder="Enter Event Year" name="year" id="year" required><br><br>

            <label for="month"><b>Month</b></label>
            <input type="number" placeholder="Enter Event Month" name="month" id ="month" required><br><br>

            <label for="day"><b>Day</b></label>
            <input type="number" placeholder="Enter Event Day" name="day" id="day" required><br><br>

            <label for="hour"><b>Hour</b></label>
            <input type="number" placeholder="Enter Event Hour" name="hour" id="hour" required><br><br>

            <label for="minute"><b>Minute</b></label>
            <input type="number" placeholder="Enter Event Minute" name="minute" id="minute" required><br><br>
            
            <label for="ampm"><b>AM or PM?</b></label>
            <input type="radio" name="ampm" value="AM" id="AM">
            <label for="AM">AM</label> 
            <input type="radio" name="ampm" value="PM" id="PM">
            <label for="PM">PM</label><br><br>

            <label for="tag"><b>Tag</b></label>
            <input type="text" placeholder="Enter Event Tag" name="tag" id ="tag" required><br><br>
            
            <label for="pub"><b>Public Event?</b></label>
            <input type="radio" name="pub" value="false" id="false">
            <label for="false">Not Public</label> 
            <input type="radio" name="pub" value="true" id="true">
            <label for="true">Public</label><br>

            <br>
            <div class = "popupbuttons">
                    <button type="button" class="btn" id = "schedule" onclick="test123();">Schedule Event</button>
                    <button type="button" class="btn" onclick="closeEvent();">Close</button>
            </div>
            
            </form>
    </div>

    <div class = "modeventform" id = "modEvent">
            <h1>Edit Event</h1>
        <form  class="form-container">        
            <label for="eventname"><b>Event Name</b></label>
            <input type="text" placeholder="Enter Event Name" name="eventname" id="enameM" required><br><br>

            <label for="year"><b>Year</b></label>
            <input type="number" placeholder="Enter Event Year" name="year" id="yearM" required><br><br>

            <label for="month"><b>Month</b></label>
            <input type="number" placeholder="Enter Event Month" name="month" id ="monthM" required><br><br>

            <label for="day"><b>Day</b></label>
            <input type="number" placeholder="Enter Event Day" name="day" id="dayM" required><br><br>

            <label for="hour"><b>Hour</b></label>
            <input type="number" placeholder="Enter Event Hour" name="hour" id="hourM" required><br><br>

            <label for="minute"><b>Minute</b></label>
            <input type="number" placeholder="Enter Event Minute" name="minute" id="minuteM" required><br><br>
            
            <label for="ampm"><b>AM or PM?</b></label>
            <input type="radio" name="ampmM" value="AM" id="AMM">
            <label for="AM">AM</label> 
            <input type="radio" name="ampmM" value="PM" id="PMM">
            <label for="PM">PM</label><br><br>
 
            <label for="tag"><b>Tag</b></label>
            <input type="text" placeholder="Enter Event Tag" name="tag" id ="tagM" required><br><br>
            
            <label for="pub"><b>Public Event?</b></label>
            <input type="radio" name="pubM" value="false" id="falseM">
            <label for="false">Not Public</label> 
            <input type="radio" name="pubM" value="true" id="trueM">
            <label for="true">Public</label><br>

            <br>
            <div class = "popupbuttons">
                    <button type="button" class="btn" id = "mod_btn">Modify Event</button>
                    <button type="button" class="btn" onclick="closeEvent2();">Close</button>
            </div>
            
            </form>
    </div>


    <div class = "eventform1" id = "addEvent1">
        <h1>Event Mananger</h1>
        <?php
            $userstatus = $_POST["register"];
            if($userstatus != 'notuser')
            {
                require 'calendar_database.php';
                session_start();
                //get user id here
                $user_id = $_SESSION['user_id'];

                $stmt = $mysqli->prepare("SELECT id, event_name FROM events WHERE (user_id=?) ORDER BY date(event_date) AND time(event_date)");
                $stmt->bind_param('d', $user_id);
                if(!$stmt){
                printf("Query Prep Failed: %s\n", $mysqli->error);
                exit;
                }
                $stmt->execute();
                $stmt->bind_result($event_id, $event_name);

                while($stmt->fetch())
                {
                    printf("<h1>%s</h1>", htmlspecialchars($event_name));
                    printf("<button type='button' class='btn' onclick='sendEventID($event_id)'>Share Event</button>");
                    printf("<button type='button' class='btn' onclick='eChange($event_id)'>Edit Event</button>");
                    printf("<button type='button' class='btn' id='delete_btn' onclick='eDelete($event_id)'>Delete Event</button>\n");
                }
            }
            else
            {
                echo "<script>document.getElementById('add_btn').style.display = 'none';</script>";
                echo "<script>document.getElementById('man_btn').style.display = 'none';</script>";
                echo "<script>document.getElementById('add_btn').style.visibility = 'hidden';</script>";
                echo "<script>document.getElementById('man_btn').style.visibility = 'hidden';</script>";
            }
        ?>
        <form  class="form-container">
            <br>
            <div class = "popupbuttons">
                    <button type="button" class="btn" onclick="closeEvent1();">Close</button>
            </div>
        
        </form>
    </div>

    <div class = "eventform1" id = "userList">
        <h1>List of Users To Share With</h1>

        <?php
            session_start();
            $current_uid = $_SESSION["user_id"];
            $userstatus = $_POST["register"];
           if($userstatus != 'notuser')
           {
           require 'calendar_database.php';



           $stmt2 = $mysqli->prepare("SELECT id, username FROM users ORDER BY username");


           $stmt2->execute();


           $stmt2->bind_result($user_id, $username);



           while($stmt2->fetch()){
                if($current_uid != $user_id){
                    printf("<h1>%s</h1>", htmlspecialchars($username));
                    printf("<button type='button' class='btn' onclick='eShare($user_id)'>Share With This User</button>\n");
                }
           }

           $stmt2->close();
           }
        ?>
            <form  class="form-container">
                <br>
                <div class = "popupbuttons">
                        <button type="button" class="btn" onclick="closeUserModal();">Close</button>
                </div>
        </form>
    </div>
    
    

    <script src="calendarpopulate.js"></script>
    <script src="calendarJavascript.js"></script>

</body>
</html>